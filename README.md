# **Тестовое задание для стажёра Backend (осенняя волна 2025)**

## Запуск задания:

1) Создайте в environment/ .env, основываясь на .env.example
2) Зайдите в docker/ и создайте .env, основываясь на .env.example
3) Пропишите docker compose up -d

## Cтэк:

* Go
* Postgres
* JWT
* Docker
* Golang-migrate

## Makefile (./docker/makefile):

* service-up - запуск сервиса
* service-down - остановка сервиса
* service-logs - прочитать логи сервиса
* update-image - пересобрать изображение
* update-volumes - очистить хранилище и создать по новой
* update-all - обновить image + volumes
* check-containers - проверить состание контейнеров
* code-review - пройтись линтером по проекту
* code-auto-format - авто-формат кода

## Структура проекта:

```
├── cmd -- вход в программу
├── docker -- деплой
│   ├── migrations -- миграции
│   │   ├── accounts -- миграции для базы данных по аккаунтам в сам сервис
│   │   └── pr -- миграции для базы данных по данным для сервиса
│   └── scripts -- вспомогающие скрипты
├── environment -- зависимости для сервиса
└── internal -- основной код
    ├── config -- конфигурации инструментов
    ├── di -- инициализация интерфейсов
    ├── errs -- список ошибок
    ├── logger -- логгер
    ├── models -- DTO
    ├── repository -- интерфейсы связанные с базами данных
    ├── secure -- интерфейсы связанные с защитой
    ├── service -- интерфейсы связанные с бизнес логикой
    └── web
        ├── handlers -- интерфейсы связанные с обработчиками
        └── middleware -- функции для обертки обработчиков
```

## Доп. api

| Название                          | Путь          | Request                                                | Response                                              |
| ----------------------------------------- | ----------------- | ------------------------------------------------------ | ----------------------------------------------------- |
| Аутентификация              | /auth             | {"username":"admin","password":"admin"}                | {"access_token":"super_access"} + refresh в куки |
| Обновление access               | /auth/access      | refresh_token в куки                              | {"access_token":"super_access"}                       |
| Создание пользователя | /admin/createUser | {"username":"admin","password":"admin", "role":"user"} | {"username":"admin", "role":"user"}                   |

## Комментарии к решению

- От себя добавил:

  - Логирование всех действий
  - Авторизацию
  - Миграции в отдельном контейнрее
  - Скрипт для линтера
  - Отдельную базу для хранения пользователей для ВХОДА в сервис
- Комментарии:

  - Приоритет отдал бизнес-логике и архитектуры, от чего не успел реализовать тесты. При наличие доп. времени смог бы их реализовать.
  - Тестирование проводилось в ручную через Postman. Результаты: все работает так, как прописано в api + запросы не более <300 мс.
  - В API указано, что для /team/add не нужен JWT токен. Это странно, я бы предложил бы это изменить.
  - Само API имело неточности ( к примеру: что будет, если попытаться замерджить pr без проверяющих? ). Я добавил от себя пару ошибок

## Обращение к проверяющим

* Если у вас будет свободное время, то всегда буду рад получить критику к моему коду, а также к его улучшению. Меня можно найти в тг -> @ummuys
